<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>마커 생성하기</title>
</head>
<body>
<div id="map" style="width:100%;height:350px;"></div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=bad2312ffcb2c3e1eef6908fa8571488"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    $.ajax({
        url: "/area/map",
        type: "GET",
        dataType: "json",
        success: function(data) {
            var mapContainer = document.getElementById('map'); // 지도를 표시할 div
            var centerPosition = new kakao.maps.LatLng(data[0].localPosition.lat, data[0].localPosition.lng); // 지도의 중심좌표
            var mapOption = {
                center: centerPosition,
                level: data[0].level // 지도의 확대 레벨
            };
            var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
            
            for (var i = 0; i < data.length; i++) {
                var markerPosition = new kakao.maps.LatLng(data[i].localPosition.lat, data[i].localPosition.lng); // 마커가 표시될 위치입니다
                var marker = new kakao.maps.Marker({
                    position: markerPosition
                }); // 마커를 생성합니다
                
                marker.setMap(map); // 마커가 지도 위에 표시되도록 설정합니다
            }
        },
        error: function() {
            alert("데이터를 불러오는데 실패하였습니다.");
        }
    });
});
</script>
</body>
</html>